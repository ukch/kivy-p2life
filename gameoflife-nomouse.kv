#:kivy 1.8.0
#:import GOLGrid kivy_p2life.widgets
#:import PlayerUI kivy_p2life.widgets

# TODO when 1.8.1 is released, use the new #import statement
<GOLGrid>:
    num_grids: 2
    size: self.cols * self.cell_size, self.rows * self.cell_size

<GridCell>:
    canvas:
        Color:
            rgba: self.colour
        Rectangle:
            pos: self.pos
            size: self.size
        Color:
            rgba: self.border_colour
        Line:
            # FIXME the drag line looks a bit ugly
            points: [self.x, self.y, self.x + self.width, self.y, self.x + self.width, self.y + self.height, self.x, self.y + self.height, self.x, self.y]

<PlayerUI>:
    size_hint: 0, 0
    canvas.before:
        Color:
            rgba: [0.4, 0.4, 0.4, 1]
        Rectangle:
            pos: self.pos
            size: self.size
    canvas:
        Color:
            rgba: self.colour
        Rectangle:
            pos: self.x + 1, self.y + 1
            size: (self.width - 1) * self.completeness, self.height - 2


CustomAnchorLayout:
    grid: grid
    anchor: "center", "center"

    BoxLayout:
        orientation: "vertical"
        size_hint: 0, 0
        size: grid.width, grid.height + 100

        PlayerUI:
            id: white_ui
            app: root.app
            number: 1
            size: grid.width, 50

        GOLGrid:
            id: grid
            size_hint: 0, 0
            player_uis: [white_ui, black_ui]

        PlayerUI:
            id: black_ui
            app: root.app
            number: 2
            size: grid.width, 50
