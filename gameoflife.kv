#:kivy 1.8.0
#:import evolve kivy_p2life.bindings.evolve
#:import DrawableGrid kivy_grid_cells.widgets

<DrawableGrid>:
    size: self.cols_adjusted, self.rows_adjusted

<GridCell>:
    canvas:
        Color:
            rgba: self.colour
        Rectangle:
            pos: self.pos
            size: self.size

CustomLayout:
    grid: grid
    end_turn_button: end_turn_button
    orientation: "vertical"

    AnchorLayout:
        size_hint: 1, 1
        anchor_x: "left"
        anchor_y: "bottom"

        DrawableGrid:
            id: grid
            size_hint: 0, 0

    AnchorLayout:
        anchor_x: "right"
        anchor_y: "bottom"
        size_hint: 1, .2

        BoxLayout:
            orientation: "vertical"
            size_hint: 0, 0
            size: 100, 100
            canvas:
                Color:
                    rgba: [0.5, 0.5, 0.5, 1]
                Rectangle:
                    pos: self.x - 5, self.y
                    size: 105, 105
            Button:
                id: end_turn_button
                text: "End turn"
                background_normal: ""
                background_down: ""

            Button:
                id: next_button
                text: "Next"
                on_press: evolve(grid)
